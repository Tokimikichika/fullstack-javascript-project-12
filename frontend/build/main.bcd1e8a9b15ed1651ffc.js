"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[792],{627:(e,a,t)=>{var n=t(6540),l=t(5338),r=t(3508),s=t(2635),c=t(2389),A=t(1468),m=t(5307),o=t(2845),i=t(615),d=t.n(i),u=t(7767),h=t(4976),p=t(8084),E=t(1083),g=t(1739),I=t(5615);var b=t(4644),y=t(5816),C=t(378);const w=(0,y.xP)({reducerPath:"channelsApi",baseQuery:(0,C.cw)({baseUrl:"/api/v1/channels",prepareHeaders:(e,a)=>{let{getState:t}=a;const{auth:n}=t();return e.set("Authorization",`Bearer ${n.token}`),e}}),tagTypes:["Channels, Messages"],endpoints:e=>({getChannels:e.query({query:()=>"",providesTags:["Channels"]}),addChannel:e.mutation({query:e=>({method:"POST",body:e})}),updateChannel:e.mutation({query:e=>({url:e.id,method:"PATCH",body:e})}),deleteChannel:e.mutation({query:e=>({url:e,method:"DELETE",invalidatesTags:["Messages","Channels"]})})})}),{useGetChannelsQuery:M,useAddChannelMutation:k,useUpdateChannelMutation:N,useDeleteChannelMutation:v}=w,S=(0,m.Z0)({name:"ui",initialState:{modal:{isOpened:!1,type:null,extra:null},currentChannelId:"1",defaultChannelId:"1"},reducers:{openModal:(e,a)=>{let{payload:t}=a;const{type:n,extra:l}=t;return{...e,modal:{isOpened:!0,type:n,extra:l??null}}},closeModal:e=>({...e,modal:{isOpened:!1,type:null,extra:null}}),setCurrentChannel(e,a){let{payload:t}=a;const{channelId:n}=t;return{...e,currentChannelId:n}}},extraReducers:e=>{e.addMatcher(w.endpoints.addChannel.matchFulfilled,((e,a)=>({...e,currentChannelId:a.payload.id})))}}),{actions:R}=S,j=S.reducer,B=localStorage.getItem("user"),Q=B?JSON.parse(B):{},G=(0,m.Z0)({name:"auth",initialState:Q,reducers:{login(e,a){let{payload:t}=a;localStorage.setItem("user",JSON.stringify(t)),e.username=t.username,e.token=t.token},logout(e){localStorage.removeItem("user"),e.username=null,e.token=null}}}),{actions:x}=G,T=G.reducer,U=(0,y.xP)({reducerPath:"messagesApi",baseQuery:(0,C.cw)({baseUrl:"/api/v1/messages",prepareHeaders:(e,a)=>{let{getState:t}=a;const{auth:n}=t();return e.set("Authorization",`Bearer ${n.token}`),e}}),tagTypes:["Messages"],endpoints:e=>({getMessages:e.query({query:()=>"",providesTags:["Messages"]}),addMessage:e.mutation({query:e=>({method:"POST",body:e})})})}),{useGetMessagesQuery:P,useAddMessageMutation:F}=U,D={...R,...x},H=(0,b.HY)({ui:j,auth:T,[w.reducerPath]:w.reducer,[U.reducerPath]:U.reducer}),O="/api/v1",Z={loginPath:()=>[O,"login"].join("/"),signupPath:()=>[O,"signup"].join("/"),chatPagePath:()=>"/",loginPagePath:()=>"/login",signupPagePath:()=>"/signup"},z=()=>{const e=(0,A.wA)(),[a,t]=(0,n.useState)(!1),l=(0,n.useRef)(),r=(0,u.zy)(),s=(0,u.Zp)(),{t:m}=(0,c.Bd)();(0,n.useEffect)((()=>{l.current.focus()}),[]);const i=(0,p.Wx)({initialValues:{username:"",password:""},onSubmit:async a=>{t(!1);try{const t=await E.A.post(Z.loginPath(),a);e(D.login(t.data));const{from:n}=r.state||{from:{pathname:Z.chatPagePath()}};s(n)}catch(e){if(!e.isAxiosError)return void o.oR.error(m("errors.unknown"));401===e.response?.status?(t(!0),l.current.select()):o.oR.error(m("errors.network"))}}});return n.createElement("div",{className:"container-fluid h-100"},n.createElement("div",{className:"row justify-content-center align-content-center h-100"},n.createElement("div",{className:"col-12 col-md-8 col-xxl-6"},n.createElement("div",{className:"card shadow-sm"},n.createElement("div",{className:"card-body row p-5"},n.createElement("div",{className:"col-12 col-md-6 d-flex align-items-center justify-content-center"},n.createElement("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/7AARRHVja3kAAQAEAAAAPAAA/+EDimh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjNmN2RmMzZmLTI1MDAtNDU4Zi1iODM2LWE0ODE1Yzc4MjU4ZSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NEQ2MThFMzA3QTExMUVCOTI0M0Y2QUQ5MTQzNUJERCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NEQ2MThFMjA3QTExMUVCOTI0M0Y2QUQ5MTQzNUJERCIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5ZTczYWM1NS0wMmMyLTRiOTAtOTZhNi1mYWYxYTA5ODFlNmMiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjMmIxYmVjZS0xNDRmLThkNDItOTJjMS1hNjAxY2UwNjdjY2YiLz4gPC9yZGY6RGVzY3JpcHRp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",className:"rounded-circle",alt:"login"})),n.createElement(g.A,{onSubmit:i.handleSubmit,className:"col-12 col-md-6 mt-3 mt-mb-0"},n.createElement("h1",{className:"text-center mb-4"},m("login.header")),n.createElement(g.A.Group,{className:"form-floating mb-3"},n.createElement(g.A.Control,{onChange:i.handleChange,value:i.values.username,name:"username",id:"username",autoComplete:"username",isInvalid:a,required:!0,ref:l,placeholder:m("login.username")}),n.createElement(g.A.Label,{htmlFor:"username"},m("login.username"))),n.createElement(g.A.Group,{className:"form-floating mb-4"},n.createElement(g.A.Control,{type:"password",onChange:i.handleChange,value:i.values.password,name:"password",id:"password",autoComplete:"current-password",isInvalid:a,required:!0,placeholder:m("login.password")}),n.createElement(g.A.Label,{htmlFor:"password"},m("login.password")),a&&n.createElement(g.A.Control.Feedback,{type:"invalid",tooltip:!0},m("login.authFailed"))),n.createElement(I.A,{type:"submit",variant:"outline-primary",className:"w-100 mb-3"},m("login.submit")))),n.createElement("div",{className:"card-footer p-4"},n.createElement("div",{className:"text-center"},n.createElement("span",null,m("login.newToChat"))," ",n.createElement(h.N_,{to:"/signup"},m("login.signup"))))))))};var f=t(778),W=t(472),J=t(9826),L=t(616);const V=e=>e.ui.currentChannelId,K=e=>e.ui.modal.isOpened,Y=e=>e.ui.modal.type,q=e=>e.ui.modal.extra?.channelId,X=e=>{let{channel:a,isCurrent:t,handleChoose:l,handleRename:r,handleRemove:s}=e;const A=t?"secondary":null,{t:m}=(0,c.Bd)();return n.createElement("li",{key:a.id,className:"nav-item w-100"},a.removable?n.createElement(J.A,{as:L.A,className:"d-flex"},n.createElement(I.A,{type:"button",key:a.id,className:"w-100 rounded-0 text-start text-truncate",onClick:()=>l(a.id),variant:A},n.createElement("span",{className:"me-1"},"#"),a.name),n.createElement(J.A.Toggle,{split:!0,className:"flex-grow-0",variant:A},n.createElement("span",{className:"visually-hidden"},m("channels.menu"))),n.createElement(J.A.Menu,null,n.createElement(J.A.Item,{onClick:()=>r(a.id)},m("channels.rename")),n.createElement(J.A.Item,{onClick:()=>s(a.id)},m("channels.remove")))):n.createElement(I.A,{type:"button",key:a.id,variant:A,className:"w-100 rounded-0 text-start",onClick:()=>l(a.id)},n.createElement("span",{className:"me-1"},"#"),a.name))},_=()=>{const e=(0,A.wA)(),{t:a}=(0,c.Bd)(),{data:t}=M(),l=(0,A.d4)(V),r=a=>{e(D.setCurrentChannel({channelId:a}))},s=a=>{e(D.openModal({type:"renameChannel",extra:{channelId:a}}))},m=a=>{e(D.openModal({type:"removeChannel",extra:{channelId:a}}))};return n.createElement(n.Fragment,null,n.createElement("div",{className:"d-flex mt-1 justify-content-between mb-2 ps-4 pe-2 p-4"},n.createElement("b",null,a("channels.channels")),n.createElement(I.A,{type:"button",variant:"group-vertical",className:"p-0 text-primary",onClick:()=>{e(D.openModal({type:"addChannel"}))}},n.createElement(W.A,{size:20}),n.createElement("span",{className:"visually-hidden"},"+"))),n.createElement("ul",{id:"channels-box",className:"nav flex-column nav-pills nav-fill px-2 mb-3 overflow-auto h-100 d-block"},t.map((e=>n.createElement(X,{key:e.id,channel:e,isCurrent:e.id===l,handleChoose:r,handleRename:s,handleRemove:m})))))};var $=t(1100),ee=t(4612),ae=t(2664);const te=e=>{let{channel:a}=e;const t=(0,A.d4)((e=>e.auth.username)),{t:l}=(0,c.Bd)(),r=ae.Ik().shape({body:ae.Yj().trim().required("Required")}),[s,{error:m,isLoading:o}]=F(),i=(0,p.Wx)({initialValues:{body:""},validationSchema:r,onSubmit:async e=>{let{body:n}=e;const l={body:d().clean(n),channelId:a.id,username:t};s(l),i.resetForm()}});return n.createElement(g.A,{noValidate:!0,onSubmit:i.handleSubmit,className:"py-1 border rounded-2"},n.createElement($.A,null,n.createElement(g.A.Control,{name:"body","aria-label":l("chat.newMessage"),placeholder:"Введите сообщение...",className:"border-0 p-0 ps-2",value:i.values.body,onChange:i.handleChange}),n.createElement(I.A,{variant:"group-vertical",type:"submit"},n.createElement(ee.A,{size:20}),n.createElement("span",{className:"visually-hidden"},l("chat.send")))))},ne=e=>{let{username:a,body:t}=e;return n.createElement("div",{className:"text-break mb-2"},n.createElement("b",null,a),": ",t)},le=()=>{const{t:e}=(0,c.Bd)(),{data:a}=M(),{data:t}=P(),l=(0,A.d4)((e=>{const{currentChannelId:t}=e.ui;return a?.find((e=>e.id===t))})),r=(0,A.d4)((e=>{const{currentChannelId:a}=e.ui,n=t?.filter((e=>e.channelId===a));return n}));return n.createElement("div",{className:"d-flex flex-column h-100"},n.createElement("div",{className:"bg-light mb-4 p-3 shadow-sm small"},n.createElement("p",{className:"m-0"},n.createElement("b",null,`# ${l?.name}`)),n.createElement("span",{className:"text-muted"},`${r.length} ${e("chat.messageCount",{count:r.length})}`)),n.createElement("div",{id:"messages-box",className:"chat-messages overflow-auto px-5 "},r.map((e=>{let{id:a,username:t,body:l}=e;return n.createElement(ne,{key:a,username:t,body:l})}))),n.createElement("div",{className:"mt-auto px-5 py-3"},n.createElement(te,{channel:l})))};var re=t(8032);const se=e=>ae.Ik().shape({name:ae.Yj().trim().required("modals.required").min(3,"modals.min").max(20,"modals.max").notOneOf(e,"modals.uniq")}),ce={addChannel:e=>{let{handleClose:a}=e;const{data:t}=M(void 0),l=t.map((e=>{let{name:a}=e;return a})),r=(0,n.useRef)(null),[s,{error:A,isLoading:m}]=k(),{t:i}=(0,c.Bd)();(0,n.useEffect)((()=>{r.current.focus()}),[]);const u=(0,p.Wx)({initialValues:{name:""},validationSchema:se(l),onSubmit:async e=>{let{name:t}=e;const n=d().clean(t),r={name:n};se(l).validateSync({name:n}),s(r),o.oR.success(i("channels.created")),a()},validateOnBlur:!1,validateOnChange:!1});return n.createElement(n.Fragment,null,n.createElement(re.A.Header,null,n.createElement(re.A.Title,null,i("modals.add")),n.createElement(I.A,{variant:"close",type:"button",onClick:a,"aria-label":"Close","data-bs-dismiss":"modal"})),n.createElement(re.A.Body,null,n.createElement(g.A,{onSubmit:u.handleSubmit},n.createElement(g.A.Group,null,n.createElement(g.A.Control,{className:"mb-2",disabled:u.isSubmitting,ref:r,onChange:u.handleChange,onBlur:u.handleBlur,value:u.values.name,isInvalid:u.errors.name&&u.touched.name||!!u.status,name:"name",id:"name"}),n.createElement("label",{className:"visually-hidden",htmlFor:"name"},i("modals.channelName")),n.createElement(g.A.Control.Feedback,{type:"invalid"},i(u.errors.name)||i(u.status)),n.createElement("div",{className:"d-flex justify-content-end"},n.createElement(I.A,{className:"me-2",variant:"secondary",type:"button",onClick:a},i("modals.cancel")),n.createElement(I.A,{variant:"primary",type:"submit",disabled:u.isSubmitting},i("modals.submit")))))))},removeChannel:e=>{let{handleClose:a}=e;const{t}=(0,c.Bd)(),l=(0,A.wA)(),[r,s]=(0,n.useState)(!1),[m,{error:i,isLoading:d}]=v(),u=(0,A.d4)(q);return n.createElement(n.Fragment,null,n.createElement(re.A.Header,null,n.createElement(re.A.Title,null,t("modals.remove")),n.createElement(I.A,{variant:"close",type:"button",onClick:a,"aria-label":"Close","data-bs-dismiss":"modal"})),n.createElement(re.A.Body,null,n.createElement("p",{className:"lead"},t("modals.confirmation")),n.createElement("div",{className:"d-flex justify-content-end"},n.createElement(I.A,{className:"me-2",variant:"secondary",type:"button",onClick:a,disabled:r},t("modals.cancel")),n.createElement(I.A,{variant:"danger",type:"button",onClick:async()=>{s(!0),m(u),l(D.setCurrentChannel({channelId:"1"})),o.oR.success(t("channels.removed")),a()},disabled:r},t("modals.confirm")))))},renameChannel:e=>{let{handleClose:a}=e;const{t}=(0,c.Bd)(),{data:l}=M(void 0),r=l.map((e=>{let{name:a}=e;return a})),s=(0,A.d4)(q),m=l.find((e=>{let{id:a}=e;return s===a})),i=(0,n.useRef)(null),[u,{error:h,isLoading:E}]=N();(0,n.useEffect)((()=>{setTimeout((()=>i.current.select()))}),[]);const b=(0,p.Wx)({initialValues:{name:m.name},validationSchema:se(r),onSubmit:async e=>{let{name:n}=e;const l=d().clean(n),c={name:l,id:s};se(r).validateSync({name:l}),u(c),o.oR.success(t("channels.renamed")),a()},validateOnBlur:!1,validateOnChange:!1});return n.createElement(n.Fragment,null,n.createElement(re.A.Header,null,n.createElement(re.A.Title,null,t("modals.rename")),n.createElement(I.A,{variant:"close",type:"button",onClick:a,"aria-label":"Close","data-bs-dismiss":"modal"})),n.createElement(re.A.Body,null,n.createElement(g.A,{onSubmit:b.handleSubmit},n.createElement(g.A.Group,null,n.createElement(g.A.Control,{className:"mb-2",disabled:b.isSubmitting,ref:i,onChange:b.handleChange,onBlur:b.handleBlur,value:b.values.name,isInvalid:b.errors.name&&b.touched.name||!!b.status,name:"name",id:"name"}),n.createElement("label",{className:"visually-hidden",htmlFor:"name"},t("modals.channelName")),n.createElement(g.A.Control.Feedback,{type:"invalid"},t(b.errors.name)||t(b.status)),n.createElement("div",{className:"d-flex justify-content-end"},n.createElement(I.A,{className:"me-2",variant:"secondary",type:"button",onClick:a},t("modals.cancel")),n.createElement(I.A,{variant:"primary",type:"submit",disabled:b.isSubmitting},t("modals.submit")))))))}},Ae=()=>{const e=(0,A.wA)(),a=(0,A.d4)(K),t=()=>{e(D.closeModal())},l=(0,A.d4)(Y),r=ce[l];return n.createElement(re.A,{show:a,onHide:t,centered:!0},r&&n.createElement(r,{handleClose:t}))},me=()=>{const{isLoading:e}=M(void 0),{isLoading:a}=P(),{t}=(0,c.Bd)();return e||a?n.createElement("div",{className:"h-100 d-flex justify-content-center align-items-center"},n.createElement(f.A,{animation:"border",role:"status",variant:"primary"},n.createElement("span",{className:"visually-hidden"},t("loading")))):n.createElement(n.Fragment,null,n.createElement(Ae,null),n.createElement("div",{className:"container h-100 my-4 overflow-hidden rounded shadow"},n.createElement("div",{className:"row h-100 bg-white flex-md-row"},n.createElement("div",{className:"col-4 col-md-2 border-end px-0 bg-light flex-column h-100 d-flex"},n.createElement(_,null)),n.createElement("div",{className:"col p-0 h-100"},n.createElement(le,null)))))},oe=t.p+"assets/images/notFound.60298ae84b40d02d2bc9.jpg",ie=()=>{const{t:e}=(0,c.Bd)();return n.createElement("div",{className:"text-center"},n.createElement("img",{alt:e("notFound.header"),className:"img-fluid h-25",src:oe}),n.createElement("h1",{className:"h4 text-muted"},e("notFound.header")),n.createElement("p",{className:"text-muted"},e("notFound.message"),n.createElement("a",{href:"/"},e("notFound.linkText"))))};var de=t(9716);const ue=()=>{const e=(0,A.wA)(),a=(0,A.d4)((e=>e.auth)),{t}=(0,c.Bd)();return n.createElement(de.A,{bg:"white",expand:"lg",className:"shadow-sm"},n.createElement("div",{className:"container"},n.createElement(de.A.Brand,{as:h.N_,to:"/"},t("hexletChat")),!!a.token&&n.createElement(I.A,{onClick:()=>e(D.logout())},t("logout"))))},he=()=>{const[e,a]=(0,n.useState)(!1),t=(0,n.useRef)(),l=(0,A.wA)(),r=(0,u.Zp)(),{t:s}=(0,c.Bd)();(0,n.useEffect)((()=>{t.current.focus()}),[]);const m=ae.Ik().shape({username:ae.Yj().trim().required("signup.required").min(3,"signup.usernameConstraints").max(20,"signup.usernameConstraints"),password:ae.Yj().trim().required("signup.required").min(6,"signup.passMin"),confirmPassword:ae.Yj().test("confirmPassword","signup.mustMatch",((e,a)=>e===a.parent.password))}),o=(0,p.Wx)({initialValues:{username:"",password:"",confirmPassword:""},validationSchema:m,onSubmit:async e=>{a(!1);try{const a=await E.A.post(Z.signupPath(),{username:e.username,password:e.password});l(D.login(a.data)),r(Z.chatPagePath())}catch(e){if(!e.isAxiosError)throw e;if(409===e.response.status)return a(!0),void t.current.select();throw e}}});return n.createElement("div",{className:"container-fluid h-100"},n.createElement("div",{className:"row justify-content-center align-content-center h-100"},n.createElement("div",{className:"col-12 col-md-8 col-xxl-6"},n.createElement("div",{className:"card shadow-sm"},n.createElement("div",{className:"card-body d-flex flex-column flex-md-row justify-content-around align-items-center p-5"},n.createElement("div",null,n.createElement("img",{src:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/7AARRHVja3kAAQAEAAAAPAAA/+EDimh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxMzggNzkuMTU5ODI0LCAyMDE2LzA5LzE0LTAxOjA5OjAxICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjNhNWRjYTFlLWRjN2QtNGFhOC04YjIyLTA3MjBkZDg5ZWMwNSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpGOEIyODlBNzA3QTAxMUVCQTAwRENDMUIwMTM0QTBCNiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpGOEIyODlBNjA3QTAxMUVCQTAwRENDMUIwMTM0QTBCNiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo2ZTAyMmM2MS1iNTU4LTQ1MTktYjZkMS1iODE0ODU1NzAzYzkiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjZGU2NGNiNC01NWIwLTA2NGEtOWViOS0wOWZhNWZmM2Q5OTAiLz4gPC9yZGY6RGVzY3JpcHRp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",className:"rounded-circle",alt:"Регистрация"})),n.createElement(g.A,{onSubmit:o.handleSubmit,className:"w-50"},n.createElement("h1",{className:"text-center mb-4"},s("signup.header")),n.createElement(g.A.Group,{className:"form-floating mb-3"},n.createElement(g.A.Control,{onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.username,placeholder:s("signup.username"),name:"username",id:"username",autoComplete:"username",isInvalid:o.errors.username&&o.touched.username||e,required:!0,ref:t}),n.createElement(g.A.Label,{htmlFor:"username"},s("signup.username")),n.createElement(g.A.Control.Feedback,{type:"invalid",tooltip:!0,placement:"right"},s(o.errors.username))),n.createElement(g.A.Group,{className:"form-floating mb-3"},n.createElement(g.A.Control,{type:"password",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.password,placeholder:s("signup.password"),name:"password",id:"password","aria-describedby":"passwordHelpBlock",isInvalid:o.errors.password&&o.touched.password||e,required:!0,autoComplete:"new-password"}),n.createElement(g.A.Control.Feedback,{type:"invalid",tooltip:!0},s(o.errors.password)),n.createElement(g.A.Label,{htmlFor:"password"},s("signup.password"))),n.createElement(g.A.Group,{className:"form-floating mb-4"},n.createElement(g.A.Control,{type:"password",onChange:o.handleChange,onBlur:o.handleBlur,value:o.values.confirmPassword,placeholder:s("signup.confirm"),name:"confirmPassword",id:"confirmPassword",isInvalid:o.errors.confirmPassword&&o.touched.confirmPassword||e,required:!0,autoComplete:"new-password"}),n.createElement(g.A.Control.Feedback,{type:"invalid",tooltip:!0},s(e?"signup.alreadyExists":o.errors.confirmPassword)),n.createElement(g.A.Label,{htmlFor:"confirmPassword"},s("signup.confirm"))),n.createElement(I.A,{type:"submit",variant:"outline-primary",className:"w-100"},s("signup.submit"))))))))};t(3967);const pe=()=>(0,A.d4)((e=>e.auth)).token?React.createElement(u.sv,null):React.createElement(u.C5,{to:Z.loginPagePath()}),Ee=()=>React.createElement(h.Kd,null,React.createElement("div",{className:"d-flex flex-column h-100"},React.createElement(ue,null),React.createElement(u.BV,null,React.createElement(u.qh,{path:Z.signupPagePath(),element:React.createElement(he,null)}),React.createElement(u.qh,{path:Z.loginPagePath(),element:React.createElement(z,null)}),React.createElement(u.qh,{path:Z.chatPagePath(),element:React.createElement(pe,null)},React.createElement(u.qh,{path:"",element:React.createElement(me,null)})),React.createElement(u.qh,{path:"*",element:React.createElement(ie,null)})))),ge={ru:{translation:{channels:{menu:"Управление каналом",remove:"Удалить",rename:"Переименовать",channels:"Каналы",created:"Канал создан",renamed:"Канал переименован",removed:"Канал удалён"},loading:"Загрузка...",login:{username:"Ваш ник",password:"Пароль",submit:"Войти",signup:"Регистрация",newToChat:"Нет аккаунта?",authFailed:"Неверные имя пользователя или пароль",header:"Войти"},modals:{add:"Добавить канал",required:"Обязательное поле",min:"От 3 до 20 символов",max:"От 3 до 20 символов",uniq:"Должно быть уникальным",cancel:"Отменить",submit:"Отправить",remove:"Удалить канал",confirmation:"Уверены?",confirm:"Удалить",rename:"Переименовать канал",channelName:"Имя канала",editChannelName:"Новое имя канала"},hexletChat:"Hexlet Chat",logout:"Выйти",chat:{send:"Отправить",messageCount_zero:"сообщений",messageCount_one:"сообщение",messageCount_few:"сообщения",messageCount_many:"сообщений",newMessage:"Новое сообщение"},signup:{required:"Обязательное поле",passMin:"Не менее 6 символов",mustMatch:"Пароли должны совпадать",username:"Имя пользователя",usernameConstraints:"От 3 до 20 символов",password:"Пароль",confirm:"Подтвердите пароль",alreadyExists:"Такой пользователь уже существует",submit:"Зарегистрироваться",header:"Регистрация"},notFound:{header:"Страница не найдена",message:"Но вы можете перейти ",linkText:"на главную страницу"},errors:{network:"Ошибка соединения",unknown:"Неизвестная ошибка"}}}},Ie=async e=>{const a=d().getDictionary("ru");d().add(a);const t=s.Ay.createInstance();await t.use(c.r9).init({resources:ge,fallbackLng:"ru"});const n=(0,m.U1)({reducer:H,middleware:e=>e().concat([w.middleware,U.middleware])});return e.on("newMessage",(e=>{n.dispatch(U.util.updateQueryData("getMessages",void 0,(a=>{a.push(e)})))})),e.on("newChannel",(e=>{n.dispatch(w.util.updateQueryData("getChannels",void 0,(a=>{a.push(e)})))})),e.on("renameChannel",(e=>{n.dispatch(w.util.updateQueryData("getChannels",void 0,(a=>{a.find((a=>a.id===e.id)).name=e.name})))})),e.on("removeChannel",(e=>{n.dispatch(w.util.updateQueryData("getChannels",void 0,(a=>{const t=a.filter((a=>a.id!==e.id)),l=n.getState();return l.ui.currentChannelId===e.id&&n.dispatch(D.setCurrentChannel(l.ui.defaultChannelId)),t})))})),React.createElement(c.xC,{i18n:t},React.createElement(A.Kq,{store:n},React.createElement(Ee,null),React.createElement(o.N9,null)))};(async()=>{const e=l.createRoot(document.querySelector("#chat")),a=(0,r.io)(),t=await Ie(a);e.render(n.createElement(n.StrictMode,null,t))})()}},e=>{e.O(0,[975],(()=>{return a=627,e(e.s=a);var a}));e.O()}]);